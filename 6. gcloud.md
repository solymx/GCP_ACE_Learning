## Google Cloud æä¾›çš„ æŒ‡ä»¤åˆ—ä»‹é¢ï¼ˆCLIï¼‰(GCloud)

- gcloud ç”¨ä¾†ç®¡ç† Kubernetesã€Œå¢é›†ã€
- å¤§ç´„æœ‰ 75% çš„ GCP è³‡æºéƒ½èƒ½é€é gcloud ç®¡ç†
- é™¤äº† gcloudï¼Œé‚„æœ‰å…¶ä»– CLI å·¥å…·ï¼š
  - gsutilï¼šé‡å° Cloud Storage çš„ CLI å·¥å…·
  - bqï¼šBigQuery çš„ CLI å·¥å…·
  - cbdï¼šCloud Bigtable çš„ CLI å·¥å…·
  - kubectlï¼šç”¨æ–¼ Kubernetes ä¸­ç®¡ç† podsã€éƒ¨ç½²ç­‰è³‡æº
    - ç®¡ç†å¢é›†å…§éƒ¨çš„æ‡‰ç”¨ç¨‹å¼
- å®‰è£ä½¿ç”¨
  - gcloud æ˜¯ google cloud sdk çš„ä¸€éƒ¨åˆ†ï¼Œå®‰è£å‰é›»è…¦è¦å…ˆå®‰è£ python
  - æœ¬åœ°é›»è…¦ä¸æƒ³å®‰è£ sdk ï¼Œä¹Ÿå¯ä»¥é€é cloud shell åœ¨ç€è¦½å™¨ä¸­ä½¿ç”¨

### å•Ÿç”¨


![image](img/1.png)



ä¸Šåœ–ä½ç½®åœ¨ç€è¦½å™¨çš„å³ä¸Šè§’

### ç›¸é—œæŒ‡ä»¤

`gcloud --version`
çœ‹ç›®å‰ç‰ˆæœ¬

`gcloud init`
åˆå§‹åŒ–

`gcloud config list`
çœ‹ç›®å‰è¨­å®šï¼Œè£¡é¢æœƒæœ‰ 4 å€‹åƒæ•¸æ˜¯è€ƒè©¦æœƒè€ƒï¼Œç‚ºåº•ä¸‹ï¼š

```
compute.region: é è¨­çš„åœ°å€ï¼ˆå¦‚ us-east1ï¼‰

compute.zone: é è¨­çš„å€åŸŸä»£ç¢¼ï¼ˆå¦‚ us-east1-bï¼‰

core.account: ä½¿ç”¨çš„å¸³è™Ÿ

core.project: å°ˆæ¡ˆ ID
```

- åªæƒ³çœ‹ç‰¹å®šè³‡æ–™å¯ä»¥ç”¨
  - `gcloud config list account`
  - é€™å€‹ç”¨æ³•æ˜¯è³‡æ–™åœ¨ core åº•ä¸‹ï¼Œå¦‚æœä¸æ˜¯å°±è¦æ”¹åˆ¥çš„æ–¹å¼ï¼Œå¦‚åº•ä¸‹ (compute å€æ®µ)
    - `gcloud config list compute/region`
- å¦‚æœæƒ³è¦è¨­å®šè®Šæ•¸ï¼Œå¯ä»¥ç”¨ä¸‹é¢æŒ‡ä»¤ï¼š
  - `gcloud config set compute/zone us-central1-a`


- **è€ƒè©¦å¸¸è¦‹ï¼šè¨­å®šç•¶å‰ä½¿ç”¨çš„å°ˆæ¡ˆ**
  - `gcloud config set project YOUR_PROJECT_ID`
  - (Project ID å°±æ˜¯é»å·¦ä¸Šåœ–çš„ Project æœƒçœ‹åˆ° ID)
- å¦‚æœè¦ç§»é™¤è¨­å®šå¯ä»¥ç”¨ unset ï¼Œå¦‚ä¸‹èˆ‰ä¾‹ï¼š
  - `gcloud config unset compute/region`
 

## æŒ‡ä»¤çµæ§‹
```
gcloud <ç¾¤çµ„> <å­ç¾¤çµ„> <å‹•ä½œ>
```

- ğŸ”¹ ç¾¤çµ„ï¼ˆGroupï¼‰
  - ä»£è¡¨ä½ è¦æ“ä½œçš„ GCP æœå‹™ï¼Œä¾‹å¦‚ï¼š
    - config
    - compute
    - container
    - functions
    - iam
    - dataflow ç­‰ç­‰
- ğŸ”¸ å­ç¾¤çµ„ï¼ˆSubgroupï¼‰
  - æ˜¯æ‰€å±¬æœå‹™ä¸­çš„å­é¡åˆ¥ï¼Œä¾‹å¦‚åœ¨ compute è£¡çš„å­ç¾¤çµ„åŒ…æ‹¬ï¼š
    - instancesï¼ˆè™›æ“¬æ©Ÿå™¨ï¼‰
    - imagesï¼ˆæ˜ åƒæª”ï¼‰
    - instance-templatesï¼ˆå¯¦ä¾‹ç¯„æœ¬ï¼‰
    - machine-typesï¼ˆæ©Ÿå™¨é¡å‹ï¼‰
    - zonesã€regions ç­‰
   
  - Example
    -  åˆªé™¤ vm: `gcloud compute instances delete my-first-instance`
    -  å»ºç«‹ vm: `gcloud compute instances create <INSTANCE_NAME>`
      - å¯ä»¥çµ¦å¾ˆç´°çš„è¨­å®šï¼Œé€™è£¡èˆ‰ä¾‹æŒ‡å®š machine type: `--machine-type=n1-standard-2`
   

  ## list v.s describe

  - list
    - åˆ—å‡ºæ‰€æœ‰æŸé¡è³‡æºï¼Œå¸¸æ­é… --filterã€--sort-byã€--uri
    - example
      - `gcloud compute images list --sort-by=name --filter="project:ubuntu-os-cloud"` 
  -  describe
    - åˆ—å‡ºå–®ä¸€è³‡æºçš„å®Œæ•´è³‡è¨Š
    - example
      - `gcloud compute regions describe us-west4` 
